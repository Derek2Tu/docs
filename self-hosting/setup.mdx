---
title: 'Post-Deployment Setup'
---

### License Key Activation

All self-hosted Carbon environments require a unique license key to run. Separate license keys *must* be used for separate environments. To generate a new license key, you must first obtain a registration key from Carbon. License keys can then be generated with the following request:
```bash
curl --request POST \
  --url https://api.carbon.ai/registration/register \
  --header 'Content-Type: application/json' \
  --header 'Registration-Key: <REGISTRATION_KEY>' \
  --data '{
  "license_key_name": "<NAME_OF_LICENSE_KEY>"
}'
```
Here, `<REGISTRATION_KEY>` is your registration key, and `<NAME_OF_LICENSE_KEY>` is a unique name for your license key. Once you have a license key, to use it in your Carbon deployment, set the environment variable `LICENSE_KEY=<KEY>`, where `<KEY>` is the key obtained from the above request. Without this environment variable, Carbon will fail to run.

To list existing license keys for a given registration key, you can make the following request:
```bash
curl --request GET \
  --url https://api.carbon.ai/registration/licenses \
  --header 'Content-Type: application/json' \
  --header 'Registration-Key: <REGISTRATION_KEY>'
```

Finally, to delete a license key, make the following request:
```bash
curl --request POST \
  --url https://api.carbon.ai/registration/unregister \
  --header 'Content-Type: application/json' \
  --header 'Registration-Key: <REGISTRATION_KEY>' \
  --data '{
  "license_key_name": "<NAME_OF_LICENSE_KEY>"
}'
```
Note that you should only delete a license key if it is *no longer associated* with a Carbon deployment.

### Making API Requests

All core functions in Carbon require an API key to be included in API requests. API keys are tied to organizations. Following this, all API requests require an organization. So, before making any requests to Carbon (save for requests to `/health`), you must first create at least one organization. There are two ways to do this.
1. The Carbon image includes a script in the work directory (`/app`) called `create_org.py`. If you run `python3 create_org.py`, you'll be presented with a series of questions regarding the organization you want to create. Upon answering them, an organization will be created and the corresponding API key will be presented to you.
2. If you don't want to (or can't) directly interact with the Carbon image, you can create an organization directly from within your Postgres database. To do so, run the following sql command from the `carbon` db:
```sql
set search_path to carbon;
select * from carbon.gen_api_key_v3('<ORGANIZATION_NAME>', '<ORGANIZATION_EMAIL>', '<ORGANIZATION_OWNER_FIRST_NAME>', '<ORGANIZATION_OWNER_LAST_NAME>');
```
Replace all placeholders in brackets with real values. This query will create an organization, and the response will include the corresponding API key.